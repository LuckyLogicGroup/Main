{% extends "base.html" %}
{% block title %}Lucky Logic – History{% endblock %}

{% block content %}
<h1>📝 Game History</h1>

<!-- ROULETTE HISTORY -->
{% if roulette_rows %}
<h2>🎡 Roulette</h2>
<table>
  <thead>
    <tr>
      {% if is_admin %}<th>User</th>{% endif %}
      <th>Bet Type</th><th>Bet Value</th><th>Amount</th>
      <th>Result</th><th>Net Gain</th><th>Balance After</th>
    </tr>
  </thead>
  <tbody>
  {% for r in roulette_rows %}
    <tr>
      {% if is_admin %}<td>{{ r[0] }}</td>{% endif %}
      <td>{{ r[1] }}</td><td>{{ r[2] }}</td><td>{{ r[3] }}</td>
      <td>{{ r[4] }}</td><td>{{ r[5] }}</td><td>{{ r[6] }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No roulette spins recorded yet.</p>
{% endif %}

<!-- COINFLIP HISTORY -->
{% if coinflip_rows %}
<h2>🪙 Coinflip</h2>
<table>
  <thead>
    <tr>
      {% if is_admin %}<th>User</th>{% endif %}
      <th>Outcome</th><th>Bet Amount</th><th>Result</th>
      <th>Net Gain</th><th>Balance After</th>
    </tr>
  </thead>
  <tbody>
  {% for r in coinflip_rows %}
    <tr>
      {% if is_admin %}<td>{{ r[0] }}</td>{% endif %}
      <td>{{ r[1] }}</td><td>{{ r[2] }}</td><td>{{ r[3] }}</td>
      <td>{{ r[4] }}</td><td>{{ r[5] }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No coinflips recorded yet.</p>
{% endif %}

<!-- DICE ROLL HISTORY -->
{% if dice_rows %}
<h2>🎲 Dice Roll</h2>
<table>
  <thead>
    <tr>
      {% if is_admin %}<th>User</th>{% endif %}
      <th>Your Guess</th><th>Dice Rolled</th><th>Result</th>
      <th>Bet Amount</th><th>Net Gain</th><th>Balance After</th>
    </tr>
  </thead>
  <tbody>
  {% for r in dice_rows %}
    <tr>
      {% if is_admin %}<td>{{ r[0] }}</td>{% endif %}
      <td>{{ r[1] }}</td><td>{{ r[2] }}</td><td>{{ r[3] }}</td>
      <td>{{ r[4] }}</td><td>{{ r[5] }}</td><td>{{ r[6] }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No dice rolls recorded yet.</p>
{% endif %}

<!-- SLOTS HISTORY -->
{% if slots_rows %}
<h2>🎰 Slots</h2>
<table>
  <thead>
    <tr>
      {% if is_admin %}<th>User</th>{% endif %}
      <th>Bet Amount</th><th>Net Gain</th><th>Balance After</th>
    </tr>
  </thead>
  <tbody>
  {% for r in slots_rows %}
    <tr>
      {% if is_admin %}<td>{{ r[0] }}</td>{% endif %}
      <td>{{ r[5] }}</td><td>{{ r[6] }}</td><td>{{ r[7] }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No slot spins recorded yet.</p>
{% endif %}

<!-- CARD GAME DOWNLOAD -->
{% if show_card_link %}
  <a class="btn" href="{{ url_for('download_results') }}">📄 Download Card-Game CSV</a>
{% endif %}
{% endblock %}
